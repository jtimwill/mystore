<ul class="pagination">
  <% if @pages > 1 %>
    <% if @current_page_number == 1 %>
      <li class="disabled"><a href="#"><%= "«" %></a></li>
    <% else %>
      <li><%= link_to "«", products_path(page_number: @current_page_number - 1) %></li>
    <% end %>

    <% @pages.times do |index| %>
      <% if @current_page_number - 1 == index %>
        <li class="disabled"><a href="#"><%= "#{index+1}" %></a></li>
      <% elsif  (@current_page_number - index) > -2 && (@current_page_number - index) < 4 %>
        <li><%= link_to "#{index+1}", products_path(page_number: index+1) %></li>
      <% end %>
    <% end %>

    <% if @current_page_number == @pages %>
      <li class="disabled"><a href="#"><%= "»" %></a></li>
    <% else %>
      <li><%= link_to "»", products_path(page_number: @current_page_number + 1) %></li>
    <% end %>
  <% end %>
</ul>
